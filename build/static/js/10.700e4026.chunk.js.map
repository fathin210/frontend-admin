{"version":3,"sources":["controller/Antrian/AntrianController.js","../node_modules/@coreui/icons/js/free/cil-options.js","../node_modules/@coreui/icons/js/free/cil-check.js","../node_modules/@coreui/icons/js/free/cil-x.js","views/pages/antrian/Antrian.js"],"names":["AntrianController","fetchAntrian","date","dispatch","api","post","tanggal_pelaksanaan","headers","Authorization","localStorage","getItem","then","res","type","ANTRIAN_GET_DATA_SUCCESS","payload","data","insertAntrian","event","async","preventDefault","get","id_admin","toast","success","ANTRIAN_MODAL_HIDDEN","catch","e","error","response","meta","message","updateStatusAntrian","id_antrian","id_status","jenis_status","put","UPDATE_PAGE","updateAntrian","cetakKwitansi","window","open","cilOptions","cilCheck","cilX","Antrian","myDate","Date","setDate","useState","toLocaleDateString","useDispatch","update","useSelector","state","antrianController","antrian","authController","AuthController","history","useHistory","useEffect","profile","clear","push","xs","className","value","onChange","target","responsive","hover","scope","length","map","index","nomor_pendaftaran","pasien","nama","color","shape","status","icon","role","onClick","colSpan"],"mappings":"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","file":"static/js/10.700e4026.chunk.js","sourcesContent":["import { toast } from 'react-toastify'\nimport api from 'src/api/api'\nimport { ANTRIAN_GET_DATA_SUCCESS, ANTRIAN_MODAL_HIDDEN, UPDATE_PAGE } from 'src/redux/actionTypes'\n\nexport class AntrianController {\n  fetchAntrian(date) {\n    return (dispatch) => {\n      api\n        .post(\n          '/antrian/tanggal',\n          {\n            tanggal_pelaksanaan: date,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n            },\n          },\n        )\n        .then((res) => {\n          dispatch({\n            type: ANTRIAN_GET_DATA_SUCCESS,\n            payload: res.data.data,\n          })\n        })\n    }\n  }\n\n  insertAntrian(data, event) {\n    return async (dispatch) => {\n      event.preventDefault()\n      await api\n        .get('/profile', {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n          },\n        })\n        .then((res) => {\n          data = { ...data, id_admin: res.data.id_admin }\n        })\n      api\n        .post('/antrian', data, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n          },\n        })\n        .then(() => {\n          toast.success('Sukses menambahkan pasien ke antrian')\n          dispatch({ type: ANTRIAN_MODAL_HIDDEN })\n        })\n        .catch((e) => {\n          toast.error(e.response.data.meta.message)\n        })\n    }\n  }\n\n  updateStatusAntrian(id_antrian, id_status, jenis_status) {\n    return (dispatch) => {\n      api\n        .put(\n          '/antrian/status',\n          { id_antrian, id_status },\n          {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n            },\n          },\n        )\n        .then(() => {\n          dispatch({ type: UPDATE_PAGE })\n          toast.success('Berhasil Mengubah Status Antrian')\n        })\n        .catch((e) => {\n          toast.error(e.response.data.message)\n        })\n    }\n  }\n\n  updateAntrian(data) {\n    return (dispatch) => {\n      api\n        .put('/antrian', data, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n          },\n        })\n        .then(() => {\n          dispatch({\n            type: ANTRIAN_MODAL_HIDDEN,\n          })\n          dispatch({ type: UPDATE_PAGE })\n          toast.success('Sukses Merubah Rincian Biaya')\n        })\n        .catch((e) => {\n          toast.error(e.response.data.message)\n        })\n    }\n  }\n\n  cetakKwitansi(id_antrian) {\n    window.open(`https://api-setiakawan.gazebo-skripsi.my.id/api/kwitansi/cetak/${id_antrian}`)\n  }\n}\n","export const cilOptions = [\"512 512\",\"<path fill='var(--ci-primary-color, currentColor)' d='M256,144a64,64,0,1,0-64-64A64.072,64.072,0,0,0,256,144Zm0-96a32,32,0,1,1-32,32A32.036,32.036,0,0,1,256,48Z' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M256,368a64,64,0,1,0,64,64A64.072,64.072,0,0,0,256,368Zm0,96a32,32,0,1,1,32-32A32.036,32.036,0,0,1,256,464Z' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M256,192a64,64,0,1,0,64,64A64.072,64.072,0,0,0,256,192Zm0,96a32,32,0,1,1,32-32A32.036,32.036,0,0,1,256,288Z' class='ci-primary'/>\"]","export const cilCheck = [\"512 512\",\"<path fill='var(--ci-primary-color, currentColor)' d='M199.066,456l-7.379-7.514-3.94-3.9-86.2-86.2.053-.055L17.936,274.665l97.614-97.613,83.565,83.565L398.388,61.344,496,158.958,296.729,358.229,285.469,369.6ZM146.6,358.183l52.459,52.46.1-.1.054.054,52.311-52.311,11.259-11.368L450.746,158.958,398.388,106.6,199.115,305.871,115.55,222.306,63.191,274.665l83.464,83.463Z' class='ci-primary'/>\"]","export const cilX = [\"512 512\",\"<polygon fill='var(--ci-primary-color, currentColor)' points='427.314 107.313 404.686 84.687 256 233.373 107.314 84.687 84.686 107.313 233.373 256 84.686 404.687 107.314 427.313 256 278.627 404.686 427.313 427.314 404.687 278.627 256 427.314 107.313' class='ci-primary'/>\"]","import { cilCheck, cilOptions, cilX } from '@coreui/icons'\nimport CIcon from '@coreui/icons-react'\nimport {\n  CBadge,\n  CCard,\n  CCardBody,\n  CCardHeader,\n  CCol,\n  CDropdown,\n  CDropdownItem,\n  CDropdownMenu,\n  CDropdownToggle,\n  CFormInput,\n  CRow,\n  CTable,\n  CTableBody,\n  CTableDataCell,\n  CTableHead,\n  CTableHeaderCell,\n  CTableRow,\n} from '@coreui/react'\nimport React, { useState, useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min'\nimport { toast } from 'react-toastify'\nimport { AntrianController } from 'src/controller/Antrian/AntrianController'\nimport { AuthController } from 'src/controller/Auth/AuthController'\n\nfunction Antrian() {\n  var myDate = new Date()\n  const [date, setDate] = useState(myDate.toLocaleDateString('en-CA'))\n  const dispatch = useDispatch()\n  const update = useSelector((state) => state.update)\n  const antrianController = new AntrianController()\n  const antrian = useSelector((state) => state.antrian.data)\n  const authController = new AuthController()\n  const history = useHistory()\n\n  useEffect(() => {\n    authController\n      .profile()\n      .then(() => {\n        dispatch(antrianController.fetchAntrian(date))\n      })\n      .catch((e) => {\n        localStorage.clear()\n        history.push('/login')\n        toast.error('Silahkan Login Kembali')\n      })\n  }, [date, update])\n\n  return (\n    <CRow>\n      <CCol xs={12}>\n        <CCard>\n          <CCardHeader>\n            <CRow className=\"justify-content-between align-items-center\">\n              <CCol xs={8}>\n                <strong>List Data Antrian</strong>\n              </CCol>\n            </CRow>\n            <CRow className=\"mt-3 mb-3\">\n              <CCol>\n                <CFormInput type=\"date\" value={date} onChange={(e) => setDate(e.target.value)} />\n              </CCol>\n            </CRow>\n          </CCardHeader>\n          <CCardBody>\n            <CTable responsive=\"md\" hover>\n              <CTableHead>\n                <CTableRow>\n                  <CTableHeaderCell scope=\"row\">No.</CTableHeaderCell>\n                  <CTableHeaderCell scope=\"row\">No. Pendaftaran</CTableHeaderCell>\n                  <CTableHeaderCell scope=\"row\">Nama</CTableHeaderCell>\n                  <CTableHeaderCell scope=\"row\">Status</CTableHeaderCell>\n                  <CTableHeaderCell scope=\"row\"></CTableHeaderCell>\n                </CTableRow>\n              </CTableHead>\n              <CTableBody>\n                {/* Disini map data dari api */}\n                {antrian.length > 0 ? (\n                  antrian?.map((data, index) => {\n                    return (\n                      <CTableRow key={index}>\n                        <CTableHeaderCell scope=\"col\">{++index}</CTableHeaderCell>\n                        <CTableDataCell>{data?.nomor_pendaftaran}</CTableDataCell>\n                        <CTableDataCell>{data.pasien?.nama}</CTableDataCell>\n                        <CTableDataCell>\n                          {data?.id_status === 1 ? (\n                            <CBadge color=\"primary\" shape=\"rounded-pill\">\n                              {data.status.jenis_status}\n                            </CBadge>\n                          ) : data.id_status === 2 ? (\n                            <CBadge color=\"secondary\" shape=\"rounded-pill\">\n                              {data.status.jenis_status}\n                            </CBadge>\n                          ) : data.id_status === 3 ? (\n                            <CBadge color=\"success\" shape=\"rounded-pill\">\n                              {data.status.jenis_status}\n                            </CBadge>\n                          ) : (\n                            <CBadge color=\"danger\" shape=\"rounded-pill\">\n                              {data.status.jenis_status}\n                            </CBadge>\n                          )}\n                        </CTableDataCell>\n                        <CTableDataCell>\n                          <CDropdown>\n                            <CDropdownToggle color=\"light\">\n                              <CIcon icon={cilOptions} />\n                            </CDropdownToggle>\n                            <CDropdownMenu>\n                              <CDropdownItem\n                                role={'button'}\n                                onClick={() =>\n                                  dispatch(\n                                    antrianController.updateStatusAntrian(\n                                      data?.id_antrian,\n                                      2,\n                                      'Sedang Ditangani',\n                                    ),\n                                  )\n                                }\n                              >\n                                <CIcon icon={cilCheck} className=\"me-2\" />\n                                Tangani\n                              </CDropdownItem>\n                              <CDropdownItem\n                                role={'button'}\n                                onClick={() =>\n                                  dispatch(\n                                    antrianController.updateStatusAntrian(\n                                      data?.id_antrian,\n                                      4,\n                                      'Batal',\n                                    ),\n                                  )\n                                }\n                              >\n                                <CIcon icon={cilX} className=\"me-2\" />\n                                Batal\n                              </CDropdownItem>\n                            </CDropdownMenu>\n                          </CDropdown>\n                        </CTableDataCell>\n                      </CTableRow>\n                    )\n                  })\n                ) : (\n                  <CTableRow>\n                    <CTableDataCell colSpan={7}>\n                      <h4 className=\"text-center\">Data Tidak Ada</h4>\n                    </CTableDataCell>\n                  </CTableRow>\n                )}\n              </CTableBody>\n            </CTable>\n          </CCardBody>\n        </CCard>\n      </CCol>\n    </CRow>\n  )\n}\n\nexport default Antrian\n"],"sourceRoot":""}