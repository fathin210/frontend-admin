{"version":3,"sources":["controller/Booking/BookingController.js","views/pages/laporan/RekapBooking.js"],"names":["BookingController","fetchBooking","date","dispatch","api","post","tanggal","headers","Authorization","localStorage","getItem","then","res","type","BOOKING_GET_DATA_SUCCESS","payload","data","catch","error","toast","response","message","deleteBooking","id_booking","delete","UPDATE_PAGE","success","fetchBookingBatal","bulan","RekapBooking","myDate","Date","getMonth","tahun","getFullYear","setDate","useState","bookingController","useDispatch","useSelector","state","booking","useEffect","console","log","xs","className","value","onChange","e","target","md","labels","datasets","backgroundColor","lain","length","map","item","jumlah_pasien","keperluan","tidakMemberitahu"],"mappings":"6KAAA,gEAIO,MAAMA,EACXC,aAAaC,GACX,OAAQC,IACNC,IACGC,KACC,WACA,CAAEC,QAASJ,GACX,CACEK,QAAS,CACPC,cAAc,UAAD,OAAYC,aAAaC,QAAQ,oBAInDC,MAAMC,IACLT,EAAS,CACPU,KAAMC,IACNC,QAASH,EAAII,KAAKA,UAGrBC,OAAOC,IACNC,IAAMD,MAAMA,EAAME,SAASJ,KAAKK,aAKxCC,cAAcC,GACZ,OAAQpB,IACNC,IACGoB,OADH,mBACsBD,GAAc,CAChChB,QAAS,CACPC,cAAc,UAAD,OAAYC,aAAaC,QAAQ,oBAGjDC,MAAK,KACJR,EAAS,CACPU,KAAMY,MAERN,IAAMO,QAAQ,sCAEfT,OAAOC,IACNC,IAAMD,MAAMA,EAAME,SAASJ,KAAKK,aAKxCM,kBAAkBC,GAChB,OAAQzB,IACNC,IACGC,KACC,mBACA,CAAEuB,SACF,CACErB,QAAS,CACPC,cAAc,UAAD,OAAYC,aAAaC,QAAQ,oBAInDC,MAAMC,IACLT,EAAS,CACPU,KAAMC,IACNC,QAASH,EAAII,KAAKA,UAGrBC,OAAOC,IACNC,IAAMD,MAAMA,EAAME,SAASJ,KAAKK,gB,iCCpE1C,8DAsEeQ,UA/Df,WAAyB,IAAD,YAClBC,EAAS,IAAIC,KACbH,EAAQE,EAAOE,WACfC,EAAQH,EAAOI,cACnB,MAAOhC,EAAMiC,GAAWC,mBAAS,GAAD,OAAIH,EAAJ,aAAcL,EAAQ,IAChDS,EAAoB,IAAIrC,IACxBG,EAAWmC,cACXtB,EAAOuB,aAAaC,GAAUA,EAAMC,QAAQzB,OAMlD,OALA0B,qBAAU,KACRvC,EAASkC,EAAkBV,kBAAkBzB,MAC5C,CAACA,IAEJyC,QAAQC,IAAI5B,GAEV,cAAC,IAAD,UACE,cAAC,IAAD,CAAM6B,GAAI,GAAV,SACE,eAAC,IAAD,WACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAMC,UAAU,6CAAhB,SACE,cAAC,IAAD,CAAMD,GAAI,EAAV,SACE,6DAGJ,cAAC,IAAD,CAAMC,UAAU,YAAhB,SACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAYjC,KAAK,QAAQkC,MAAO7C,EAAM8C,SAAWC,GAAMd,EAAQc,EAAEC,OAAOH,gBAI9E,cAAC,IAAD,UACE,cAAC,IAAD,CAAMD,UAAU,mDAAhB,SACE,cAAC,IAAD,CAAMD,GAAI,EAAGM,GAAI,EAAjB,SACE,cAAC,IAAD,CACEnC,KAAM,CACJoC,OAAQ,CAAC,YAAa,qBAAsB,2BAC5CC,SAAU,CACR,CACEC,gBAAiB,CAAC,UAAW,UAAW,UAAW,WACnDtC,KAAM,CACkB,KAAtB,UAAAA,EAAKuC,YAAL,eAAWC,QACP,EADJ,UAEIxC,EAAKuC,YAFT,aAEI,EAAWE,KAAKC,GAASA,EAAKC,gBACP,KAA3B,UAAA3C,EAAK4C,iBAAL,eAAgBJ,QACZ,EADJ,UAEIxC,EAAK4C,iBAFT,aAEI,EAAgBH,KAAKC,GAASA,EAAKC,gBACL,KAAlC,UAAA3C,EAAK6C,wBAAL,eAAuBL,QACnB,EADJ,UAEIxC,EAAK6C,wBAFT,aAEI,EAAuBJ,KAAKC,GAASA,EAAKC,4BAS9D,cAAC,IAAD","file":"static/js/17.172f409e.chunk.js","sourcesContent":["import { toast } from 'react-toastify'\nimport api from 'src/api/api'\nimport { BOOKING_GET_DATA_SUCCESS, UPDATE_PAGE } from 'src/redux/actionTypes'\n\nexport class BookingController {\n  fetchBooking(date) {\n    return (dispatch) => {\n      api\n        .post(\n          '/booking',\n          { tanggal: date },\n          {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n            },\n          },\n        )\n        .then((res) => {\n          dispatch({\n            type: BOOKING_GET_DATA_SUCCESS,\n            payload: res.data.data,\n          })\n        })\n        .catch((error) => {\n          toast.error(error.response.data.message)\n        })\n    }\n  }\n\n  deleteBooking(id_booking) {\n    return (dispatch) => {\n      api\n        .delete(`/booking/${id_booking}`, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n          },\n        })\n        .then(() => {\n          dispatch({\n            type: UPDATE_PAGE,\n          })\n          toast.success('Berhasil Menghapus Data Booking')\n        })\n        .catch((error) => {\n          toast.error(error.response.data.message)\n        })\n    }\n  }\n\n  fetchBookingBatal(bulan) {\n    return (dispatch) => {\n      api\n        .post(\n          '/booking/laporan',\n          { bulan },\n          {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n            },\n          },\n        )\n        .then((res) => {\n          dispatch({\n            type: BOOKING_GET_DATA_SUCCESS,\n            payload: res.data.data,\n          })\n        })\n        .catch((error) => {\n          toast.error(error.response.data.message)\n        })\n    }\n  }\n}\n","import { CCard, CCardBody, CCardFooter, CCardHeader, CCol, CFormInput, CRow } from '@coreui/react'\nimport { CChartDoughnut } from '@coreui/react-chartjs'\nimport React, { useState } from 'react'\nimport { useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { BookingController } from 'src/controller/Booking/BookingController'\n\nfunction RekapBooking() {\n  var myDate = new Date()\n  var bulan = myDate.getMonth()\n  var tahun = myDate.getFullYear()\n  const [date, setDate] = useState(`${tahun}-0${bulan + 1}`)\n  const bookingController = new BookingController()\n  const dispatch = useDispatch()\n  const data = useSelector((state) => state.booking.data)\n  useEffect(() => {\n    dispatch(bookingController.fetchBookingBatal(date))\n  }, [date])\n\n  console.log(data)\n  return (\n    <CRow>\n      <CCol xs={12}>\n        <CCard>\n          <CCardHeader>\n            <CRow className=\"justify-content-between align-items-center\">\n              <CCol xs={8}>\n                <strong>Rekap Booking Batal</strong>\n              </CCol>\n            </CRow>\n            <CRow className=\"mt-3 mb-3\">\n              <CCol>\n                <CFormInput type=\"month\" value={date} onChange={(e) => setDate(e.target.value)} />\n              </CCol>\n            </CRow>\n          </CCardHeader>\n          <CCardBody>\n            <CRow className=\"d-flex justify-content-center align-items-center\">\n              <CCol xs={7} md={5}>\n                <CChartDoughnut\n                  data={{\n                    labels: ['Lain-Lain', 'Keperluan Mendesak', 'Tidak Ingin Memberitahu'],\n                    datasets: [\n                      {\n                        backgroundColor: ['#41B883', '#E46651', '#00D8FF', '#DD1B16'],\n                        data: [\n                          data.lain?.length === 0\n                            ? 0\n                            : data.lain?.map((item) => item.jumlah_pasien),\n                          data.keperluan?.length === 0\n                            ? 0\n                            : data.keperluan?.map((item) => item.jumlah_pasien),\n                          data.tidakMemberitahu?.length === 0\n                            ? 0\n                            : data.tidakMemberitahu?.map((item) => item.jumlah_pasien),\n                        ],\n                      },\n                    ],\n                  }}\n                />\n              </CCol>\n            </CRow>\n          </CCardBody>\n          <CCardFooter></CCardFooter>\n        </CCard>\n      </CCol>\n    </CRow>\n  )\n}\n\nexport default RekapBooking\n"],"sourceRoot":""}