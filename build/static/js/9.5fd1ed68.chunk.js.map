{"version":3,"sources":["controller/Antrian/AntrianController.js","../node_modules/@coreui/icons/js/free/cil-options.js","../node_modules/@coreui/icons/js/free/cil-trash.js","controller/Booking/BookingController.js","../node_modules/@coreui/icons/js/free/cil-send.js","../node_modules/@coreui/icons/js/free/cil-plus.js","views/pages/booking/Booking.js"],"names":["AntrianController","fetchAntrian","date","dispatch","api","post","tanggal_pelaksanaan","headers","Authorization","localStorage","getItem","then","res","type","ANTRIAN_GET_DATA_SUCCESS","payload","data","insertAntrian","event","async","preventDefault","get","id_admin","toast","success","ANTRIAN_MODAL_HIDDEN","catch","e","error","response","meta","message","updateStatusAntrian","id_antrian","id_status","jenis_status","put","UPDATE_PAGE","updateAntrian","cetakKwitansi","window","open","cilOptions","cilTrash","BookingController","fetchBooking","tanggal","BOOKING_GET_DATA_SUCCESS","deleteBooking","id_booking","delete","fetchBookingBatal","bulan","cilSend","cilPlus","Booking","myDate","Date","setDate","useState","toLocaleDateString","update","useSelector","state","booking","bookingController","antrianController","authController","AuthController","useDispatch","history","useHistory","useEffect","profile","clear","push","xs","className","value","onChange","target","responsive","hover","scope","length","map","index","nomor_booking","jam","pasien","nama","color","icon","role","onClick","no_telepon","alamat","id_pasien","confirm","colSpan"],"mappings":"4KAAA,gEAIO,MAAMA,EACXC,aAAaC,GACX,OAAQC,IACNC,IACGC,KACC,mBACA,CACEC,oBAAqBJ,GAEvB,CACEK,QAAS,CACPC,cAAc,UAAD,OAAYC,aAAaC,QAAQ,oBAInDC,MAAMC,IACLT,EAAS,CACPU,KAAMC,IACNC,QAASH,EAAII,KAAKA,WAM5BC,cAAcD,EAAME,GAClB,OAAOC,UACLD,EAAME,uBACAhB,IACHiB,IAAI,WAAY,CACfd,QAAS,CACPC,cAAc,UAAD,OAAYC,aAAaC,QAAQ,oBAGjDC,MAAMC,IACLI,EAAO,IAAKA,EAAMM,SAAUV,EAAII,KAAKM,aAEzClB,IACGC,KAAK,WAAYW,EAAM,CACtBT,QAAS,CACPC,cAAc,UAAD,OAAYC,aAAaC,QAAQ,oBAGjDC,MAAK,KACJY,IAAMC,QAAQ,wCACdrB,EAAS,CAAEU,KAAMY,SAElBC,OAAOC,IACNJ,IAAMK,MAAMD,EAAEE,SAASb,KAAKc,KAAKC,aAKzCC,oBAAoBC,EAAYC,EAAWC,GACzC,OAAQhC,IACNC,IACGgC,IACC,kBACA,CAAEH,aAAYC,aACd,CACE3B,QAAS,CACPC,cAAc,UAAD,OAAYC,aAAaC,QAAQ,oBAInDC,MAAK,KACJR,EAAS,CAAEU,KAAMwB,MACjBd,IAAMC,QAAQ,uCAEfE,OAAOC,IACNJ,IAAMK,MAAMD,EAAEE,SAASb,KAAKe,aAKpCO,cAActB,GACZ,OAAQb,IACNC,IACGgC,IAAI,WAAYpB,EAAM,CACrBT,QAAS,CACPC,cAAc,UAAD,OAAYC,aAAaC,QAAQ,oBAGjDC,MAAK,KACJR,EAAS,CACPU,KAAMY,MAERtB,EAAS,CAAEU,KAAMwB,MACjBd,IAAMC,QAAQ,mCAEfE,OAAOC,IACNJ,IAAMK,MAAMD,EAAEE,SAASb,KAAKe,aAKpCQ,cAAcN,GACZO,OAAOC,KAAP,yEAA8ER,O,iCCpGlF,kCAAO,MAAMS,EAAa,CAAC,UAAU,yiB,iCCArC,kCAAO,MAAMC,EAAW,CAAC,UAAU,qrB,iCCAnC,gEAIO,MAAMC,EACXC,aAAa3C,GACX,OAAQC,IACNC,IACGC,KACC,WACA,CAAEyC,QAAS5C,GACX,CACEK,QAAS,CACPC,cAAc,UAAD,OAAYC,aAAaC,QAAQ,oBAInDC,MAAMC,IACLT,EAAS,CACPU,KAAMkC,IACNhC,QAASH,EAAII,KAAKA,UAGrBU,OAAOE,IACNL,IAAMK,MAAMA,EAAMC,SAASb,KAAKe,aAKxCiB,cAAcC,GACZ,OAAQ9C,IACNC,IACG8C,OADH,mBACsBD,GAAc,CAChC1C,QAAS,CACPC,cAAc,UAAD,OAAYC,aAAaC,QAAQ,oBAGjDC,MAAK,KACJR,EAAS,CACPU,KAAMwB,MAERd,IAAMC,QAAQ,sCAEfE,OAAOE,IACNL,IAAMK,MAAMA,EAAMC,SAASb,KAAKe,aAKxCoB,kBAAkBC,GAChB,OAAQjD,IACNC,IACGC,KACC,mBACA,CAAE+C,SACF,CACE7C,QAAS,CACPC,cAAc,UAAD,OAAYC,aAAaC,QAAQ,oBAInDC,MAAMC,IACLT,EAAS,CACPU,KAAMkC,IACNhC,QAASH,EAAII,KAAKA,UAGrBU,OAAOE,IACNL,IAAMK,MAAMA,EAAMC,SAASb,KAAKe,gB,qDCpEnC,MAAMsB,EAAU,CAAC,UAAU,2UCArBC,EAAU,CAAC,UAAU,2L,oGCgKnBC,UAlIf,WACE,IAAIC,EAAS,IAAIC,KACjB,MAAOvD,EAAMwD,GAAWC,mBAASH,EAAOI,mBAAmB,UACrDC,EAASC,aAAaC,GAAUA,EAAMF,SAEtCG,EAAUF,aAAaC,GAAUA,EAAMC,QAAQhD,OAC/CiD,EAAoB,IAAIrB,IACxBsB,EAAoB,IAAIlE,IACxBmE,EAAiB,IAAIC,IACrBjE,EAAWkE,cACXC,EAAUC,uBAYhB,OAVAC,qBAAU,KACRL,EACGM,UACA9D,MAAK,IAAMR,EAAS8D,EAAkBpB,aAAa3C,MACnDwB,OAAM,KACLjB,aAAaiE,QACbJ,EAAQK,KAAK,UACbpD,IAAMK,MAAM,+BAEf,CAAC1B,EAAM2D,IAER,cAAC,IAAD,UACE,cAAC,IAAD,CAAMe,GAAI,GAAV,SACE,eAAC,IAAD,WACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAMC,UAAU,6CAAhB,SACE,cAAC,IAAD,CAAMD,GAAI,EAAV,SACE,2DAGJ,cAAC,IAAD,CAAMC,UAAU,YAAhB,SACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAYhE,KAAK,OAAOiE,MAAO5E,EAAM6E,SAAWpD,GAAM+B,EAAQ/B,EAAEqD,OAAOF,gBAI7E,cAAC,IAAD,UACE,eAAC,KAAD,CAAQG,WAAW,KAAKC,OAAK,EAA7B,UACE,cAAC,KAAD,UACE,eAAC,KAAD,WACE,cAAC,KAAD,CAAkBC,MAAM,MAAxB,iBACA,cAAC,KAAD,CAAkBA,MAAM,MAAxB,0BACA,cAAC,KAAD,CAAkBA,MAAM,MAAxB,qBACA,cAAC,KAAD,CAAkBA,MAAM,MAAxB,iBACA,cAAC,KAAD,CAAkBA,MAAM,MAAxB,kBACA,cAAC,KAAD,CAAkBA,MAAM,aAG5B,cAAC,KAAD,UAEGnB,EAAQoB,OAAS,EAAjB,OACCpB,QADD,IACCA,OADD,EACCA,EAASqB,KAAI,CAACrE,EAAMsE,KAAW,IAAD,EAC5B,OACE,eAAC,KAAD,WACE,cAAC,KAAD,CAAkBH,MAAM,MAAxB,WAAiCG,IACjC,cAAC,KAAD,iBAAiBtE,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAMuE,gBACvB,cAAC,KAAD,iBAAiBvE,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAM8B,UACvB,cAAC,KAAD,iBAAiB9B,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAMwE,MACvB,cAAC,KAAD,oBAAiBxE,EAAKyE,cAAtB,aAAiB,EAAaC,OAC9B,cAAC,KAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAiBC,MAAM,QAAvB,SACE,cAAC,IAAD,CAAOC,KAAMlD,QAEf,eAAC,IAAD,WACE,eAAC,IAAD,CACEmD,KAAM,SACNC,QAAS,KAAO,IAAD,MACbtD,OAAOC,KAAP,0DAC2CzB,EAAKyE,cADhD,aAC2C,EAAaM,WADxD,0HACoL/E,EAAK8B,QADzL,0BAC2M9B,QAD3M,IAC2MA,OAD3M,EAC2MA,EAAMwE,IADjN,4BACwOxE,EAAKuE,cAD7O,8BACsQvE,EAAKyE,cAD3Q,aACsQ,EAAaC,KADnR,gCACqS1E,EAAKyE,cAD1S,aACqS,EAAaO,OADlT,kHAHJ,UAQE,cAAC,IAAD,CAAOJ,KAAMvC,EAASwB,UAAU,SARlC,oBAWA,eAAC,IAAD,CACEgB,KAAM,SACNC,QAAU5E,IACRf,EAAS8D,EAAkBjB,cAAchC,EAAKiC,aAC9C9C,EACE+D,EAAkBjD,cAChB,CACEgF,UAAWjF,EAAKiF,UAChB3F,oBAAqBU,EAAK8B,SAE5B5B,KAVR,UAeE,cAAC,IAAD,CAAO0E,KAAMtC,EAASuB,UAAU,SAflC,yBAkBA,eAAC,IAAD,CACEgB,KAAK,SACLC,QAAS,KACHtD,OAAO0D,QAAQ,8CACjB/F,EAAS8D,EAAkBjB,cAAchC,EAAKiC,cAJpD,UAQE,cAAC,IAAD,CAAO2C,KAAMjD,IAAUkC,UAAU,SARnC,cAWA,cAAC,IAAD,cApDQS,MA4DpB,cAAC,KAAD,UACE,cAAC,KAAD,CAAgBa,QAAS,EAAzB,SACE,oBAAItB,UAAU,cAAd","file":"static/js/9.5fd1ed68.chunk.js","sourcesContent":["import { toast } from 'react-toastify'\nimport api from 'src/api/api'\nimport { ANTRIAN_GET_DATA_SUCCESS, ANTRIAN_MODAL_HIDDEN, UPDATE_PAGE } from 'src/redux/actionTypes'\n\nexport class AntrianController {\n  fetchAntrian(date) {\n    return (dispatch) => {\n      api\n        .post(\n          '/antrian/tanggal',\n          {\n            tanggal_pelaksanaan: date,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n            },\n          },\n        )\n        .then((res) => {\n          dispatch({\n            type: ANTRIAN_GET_DATA_SUCCESS,\n            payload: res.data.data,\n          })\n        })\n    }\n  }\n\n  insertAntrian(data, event) {\n    return async (dispatch) => {\n      event.preventDefault()\n      await api\n        .get('/profile', {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n          },\n        })\n        .then((res) => {\n          data = { ...data, id_admin: res.data.id_admin }\n        })\n      api\n        .post('/antrian', data, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n          },\n        })\n        .then(() => {\n          toast.success('Sukses menambahkan pasien ke antrian')\n          dispatch({ type: ANTRIAN_MODAL_HIDDEN })\n        })\n        .catch((e) => {\n          toast.error(e.response.data.meta.message)\n        })\n    }\n  }\n\n  updateStatusAntrian(id_antrian, id_status, jenis_status) {\n    return (dispatch) => {\n      api\n        .put(\n          '/antrian/status',\n          { id_antrian, id_status },\n          {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n            },\n          },\n        )\n        .then(() => {\n          dispatch({ type: UPDATE_PAGE })\n          toast.success('Berhasil Mengubah Status Antrian')\n        })\n        .catch((e) => {\n          toast.error(e.response.data.message)\n        })\n    }\n  }\n\n  updateAntrian(data) {\n    return (dispatch) => {\n      api\n        .put('/antrian', data, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n          },\n        })\n        .then(() => {\n          dispatch({\n            type: ANTRIAN_MODAL_HIDDEN,\n          })\n          dispatch({ type: UPDATE_PAGE })\n          toast.success('Sukses Merubah Rincian Biaya')\n        })\n        .catch((e) => {\n          toast.error(e.response.data.message)\n        })\n    }\n  }\n\n  cetakKwitansi(id_antrian) {\n    window.open(`https://api-setiakawan.gazebo-skripsi.my.id/api/kwitansi/cetak/${id_antrian}`)\n  }\n}\n","export const cilOptions = [\"512 512\",\"<path fill='var(--ci-primary-color, currentColor)' d='M256,144a64,64,0,1,0-64-64A64.072,64.072,0,0,0,256,144Zm0-96a32,32,0,1,1-32,32A32.036,32.036,0,0,1,256,48Z' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M256,368a64,64,0,1,0,64,64A64.072,64.072,0,0,0,256,368Zm0,96a32,32,0,1,1,32-32A32.036,32.036,0,0,1,256,464Z' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M256,192a64,64,0,1,0,64,64A64.072,64.072,0,0,0,256,192Zm0,96a32,32,0,1,1,32-32A32.036,32.036,0,0,1,256,288Z' class='ci-primary'/>\"]","export const cilTrash = [\"512 512\",\"<path fill='var(--ci-primary-color, currentColor)' d='M96,472a23.82,23.82,0,0,0,23.579,24H392.421A23.82,23.82,0,0,0,416,472V152H96Zm32-288H384V464H128Z' class='ci-primary'/><rect width='32' height='200' x='168' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='240' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='312' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M328,88V40c0-13.458-9.488-24-21.6-24H205.6C193.488,16,184,26.542,184,40V88H64v32H448V88ZM216,48h80V88H216Z' class='ci-primary'/>\"]","import { toast } from 'react-toastify'\nimport api from 'src/api/api'\nimport { BOOKING_GET_DATA_SUCCESS, UPDATE_PAGE } from 'src/redux/actionTypes'\n\nexport class BookingController {\n  fetchBooking(date) {\n    return (dispatch) => {\n      api\n        .post(\n          '/booking',\n          { tanggal: date },\n          {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n            },\n          },\n        )\n        .then((res) => {\n          dispatch({\n            type: BOOKING_GET_DATA_SUCCESS,\n            payload: res.data.data,\n          })\n        })\n        .catch((error) => {\n          toast.error(error.response.data.message)\n        })\n    }\n  }\n\n  deleteBooking(id_booking) {\n    return (dispatch) => {\n      api\n        .delete(`/booking/${id_booking}`, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n          },\n        })\n        .then(() => {\n          dispatch({\n            type: UPDATE_PAGE,\n          })\n          toast.success('Berhasil Menghapus Data Booking')\n        })\n        .catch((error) => {\n          toast.error(error.response.data.message)\n        })\n    }\n  }\n\n  fetchBookingBatal(bulan) {\n    return (dispatch) => {\n      api\n        .post(\n          '/booking/laporan',\n          { bulan },\n          {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n            },\n          },\n        )\n        .then((res) => {\n          dispatch({\n            type: BOOKING_GET_DATA_SUCCESS,\n            payload: res.data.data,\n          })\n        })\n        .catch((error) => {\n          toast.error(error.response.data.message)\n        })\n    }\n  }\n}\n","export const cilSend = [\"512 512\",\"<path fill='var(--ci-primary-color, currentColor)' d='M474.444,19.857a20.336,20.336,0,0,0-21.592-2.781L33.737,213.8v38.066l176.037,70.414L322.69,496h38.074l120.3-455.4A20.342,20.342,0,0,0,474.444,19.857ZM337.257,459.693,240.2,310.37,389.553,146.788l-23.631-21.576L215.4,290.069,70.257,232.012,443.7,56.72Z' class='ci-primary'/>\"]","export const cilPlus = [\"512 512\",\"<polygon fill='var(--ci-primary-color, currentColor)' points='440 240 272 240 272 72 240 72 240 240 72 240 72 272 240 272 240 440 272 440 272 272 440 272 440 240' class='ci-primary'/>\"]","import { cilOptions, cilPlus, cilSend, cilTrash } from '@coreui/icons'\nimport CIcon from '@coreui/icons-react'\nimport {\n  CCard,\n  CCardBody,\n  CCardHeader,\n  CCol,\n  CDropdown,\n  CDropdownItem,\n  CDropdownMenu,\n  CDropdownToggle,\n  CFormInput,\n  CRow,\n  CTable,\n  CTableBody,\n  CTableDataCell,\n  CTableHead,\n  CTableHeaderCell,\n  CTableRow,\n} from '@coreui/react'\nimport React from 'react'\nimport { useState } from 'react'\nimport { useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min'\nimport { toast } from 'react-toastify'\nimport { AntrianController } from 'src/controller/Antrian/AntrianController'\nimport { AuthController } from 'src/controller/Auth/AuthController'\nimport { BookingController } from 'src/controller/Booking/BookingController'\n\nfunction Booking() {\n  var myDate = new Date()\n  const [date, setDate] = useState(myDate.toLocaleDateString('en-CA'))\n  const update = useSelector((state) => state.update)\n\n  const booking = useSelector((state) => state.booking.data)\n  const bookingController = new BookingController()\n  const antrianController = new AntrianController()\n  const authController = new AuthController()\n  const dispatch = useDispatch()\n  const history = useHistory()\n\n  useEffect(() => {\n    authController\n      .profile()\n      .then(() => dispatch(bookingController.fetchBooking(date)))\n      .catch(() => {\n        localStorage.clear()\n        history.push('/login')\n        toast.error('Silahkan Login Kembali')\n      })\n  }, [date, update])\n  return (\n    <CRow>\n      <CCol xs={12}>\n        <CCard>\n          <CCardHeader>\n            <CRow className=\"justify-content-between align-items-center\">\n              <CCol xs={8}>\n                <strong>List Data Booking</strong>\n              </CCol>\n            </CRow>\n            <CRow className=\"mt-3 mb-3\">\n              <CCol>\n                <CFormInput type=\"date\" value={date} onChange={(e) => setDate(e.target.value)} />\n              </CCol>\n            </CRow>\n          </CCardHeader>\n          <CCardBody>\n            <CTable responsive=\"md\" hover>\n              <CTableHead>\n                <CTableRow>\n                  <CTableHeaderCell scope=\"row\">No.</CTableHeaderCell>\n                  <CTableHeaderCell scope=\"row\">Kode Booking</CTableHeaderCell>\n                  <CTableHeaderCell scope=\"row\">Tanggal</CTableHeaderCell>\n                  <CTableHeaderCell scope=\"row\">Jam</CTableHeaderCell>\n                  <CTableHeaderCell scope=\"row\">Nama</CTableHeaderCell>\n                  <CTableHeaderCell scope=\"row\"></CTableHeaderCell>\n                </CTableRow>\n              </CTableHead>\n              <CTableBody>\n                {/* Disini map data dari api */}\n                {booking.length > 0 ? (\n                  booking?.map((data, index) => {\n                    return (\n                      <CTableRow key={index}>\n                        <CTableHeaderCell scope=\"col\">{++index}</CTableHeaderCell>\n                        <CTableDataCell>{data?.nomor_booking}</CTableDataCell>\n                        <CTableDataCell>{data?.tanggal}</CTableDataCell>\n                        <CTableDataCell>{data?.jam}</CTableDataCell>\n                        <CTableDataCell>{data.pasien?.nama}</CTableDataCell>\n                        <CTableDataCell>\n                          <CDropdown>\n                            <CDropdownToggle color=\"light\">\n                              <CIcon icon={cilOptions} />\n                            </CDropdownToggle>\n                            <CDropdownMenu>\n                              <CDropdownItem\n                                role={'button'}\n                                onClick={() => {\n                                  window.open(\n                                    `https://web.whatsapp.com/send?phone=62${data.pasien?.no_telepon}&text=SETIA+KAWAN%0APesan+ini+merupakan+pengingat+booking+anda+dengan+data+sebagai+berikut:%0ABooking+Tanggal:+${data.tanggal}%0AJam:+${data?.jam}%0AKode+Booking:+${data.nomor_booking}%0ANama:+${data.pasien?.nama}%0AAlamat:+${data.pasien?.alamat}%0ATerimakasih+atas+perhatiannya+bila+ada+pertanyaan+lebih+lanjut,+silahkan+chat+pada+nomor+ini&app_absent=0`,\n                                  )\n                                }}\n                              >\n                                <CIcon icon={cilSend} className=\"me-2\" />\n                                Kirim Reminder\n                              </CDropdownItem>\n                              <CDropdownItem\n                                role={'button'}\n                                onClick={(event) => {\n                                  dispatch(bookingController.deleteBooking(data.id_booking))\n                                  dispatch(\n                                    antrianController.insertAntrian(\n                                      {\n                                        id_pasien: data.id_pasien,\n                                        tanggal_pelaksanaan: data.tanggal,\n                                      },\n                                      event,\n                                    ),\n                                  )\n                                }}\n                              >\n                                <CIcon icon={cilPlus} className=\"me-2\" />\n                                Masukkan Ke Antrian\n                              </CDropdownItem>\n                              <CDropdownItem\n                                role=\"button\"\n                                onClick={() => {\n                                  if (window.confirm('Anda yakin ingin menghapus data booking ?')) {\n                                    dispatch(bookingController.deleteBooking(data.id_booking))\n                                  }\n                                }}\n                              >\n                                <CIcon icon={cilTrash} className=\"me-2\" />\n                                Batalkan\n                              </CDropdownItem>\n                              <CDropdownItem></CDropdownItem>\n                            </CDropdownMenu>\n                          </CDropdown>\n                        </CTableDataCell>\n                      </CTableRow>\n                    )\n                  })\n                ) : (\n                  <CTableRow>\n                    <CTableDataCell colSpan={7}>\n                      <h4 className=\"text-center\">Data Tidak Ada</h4>\n                    </CTableDataCell>\n                  </CTableRow>\n                )}\n              </CTableBody>\n            </CTable>\n          </CCardBody>\n        </CCard>\n      </CCol>\n    </CRow>\n  )\n}\n\nexport default Booking\n"],"sourceRoot":""}